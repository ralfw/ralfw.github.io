<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Terminus Architecture - One Man Think Tank</title><meta name="description" content=" In my experience most software architectures in projects I see are too technical. They donâ€™t focus on the most important thing: results and behavior. Robert C. Martin coined they term â€screaming architectureâ€œ: Your architectures should tell readers about the system, not about the frameworks&hellip;"><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="canonical" href="https://ralfw.de/terminus-architecture/"><link rel="alternate" type="application/atom+xml" href="https://ralfw.de/feed.xml"><link rel="alternate" type="application/json" href="https://ralfw.de/feed.json"><meta property="og:title" content="Terminus Architecture"><meta property="og:image" content="https://ralfw.de/media/posts/124/DraggedImage-1-1.png"><meta property="og:site_name" content="One Man Think Tank"><meta property="og:description" content=" In my experience most software architectures in projects I see are too technical. They donâ€™t focus on the most important thing: results and behavior. Robert C. Martin coined they term â€screaming architectureâ€œ: Your architectures should tell readers about the system, not about the frameworks&hellip;"><meta property="og:url" content="https://ralfw.de/terminus-architecture/"><meta property="og:type" content="article"><meta name="twitter:card" content="summary"><meta name="twitter:site" content="@ralfw"><meta name="twitter:title" content="Terminus Architecture"><meta name="twitter:description" content=" In my experience most software architectures in projects I see are too technical. They donâ€™t focus on the most important thing: results and behavior. Robert C. Martin coined they term â€screaming architectureâ€œ: Your architectures should tell readers about the system, not about the frameworks&hellip;"><meta name="twitter:image" content="https://ralfw.de/media/posts/124/DraggedImage-1-1.png"><link rel="shortcut icon" href="https://ralfw.de/media/website/favicon.png" type="image/x-icon"><style>:root{--body-font:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";--heading-font:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";--logo-font:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";--menu-font:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol"}</style><link rel="stylesheet" href="https://ralfw.de/assets/css/style.css?v=0173fa4178744f44e30f72c6ec93483a"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://ralfw.de/terminus-architecture/"},"headline":"Terminus Architecture","datePublished":"2019-05-11T08:17","dateModified":"2021-01-28T14:04","image":{"@type":"ImageObject","url":"https://ralfw.de/media/posts/124/DraggedImage-1-1.png","height":480,"width":1056},"description":" In my experience most software architectures in projects I see are too technical. They donâ€™t focus on the most important thing: results and behavior. Robert C. Martin coined they term â€screaming architectureâ€œ: Your architectures should tell readers about the system, not about the frameworks&hellip;","author":{"@type":"Person","name":"Ralf Westphal"},"publisher":{"@type":"Organization","name":"Ralf Westphal","logo":{"@type":"ImageObject","url":"https://ralfw.de/media/website/logo-smaller.png","height":53,"width":250}}}</script></head><body><div class="site-container"><header class="top" id="js-header"><a class="logo" href="https://ralfw.de/"><img src="https://ralfw.de/media/website/logo-smaller.png" alt="One Man Think Tank"></a><nav class="navbar js-navbar"><button class="navbar__toggle js-toggle" aria-label="Menu" aria-haspopup="true" aria-expanded="false"><span class="navbar__toggle-box"><span class="navbar__toggle-inner">Menu</span></span></button><ul class="navbar__menu"><li><a href="https://ralfw.de/focus/" target="_self">Focus</a></li><li><a href="https://ralfw.de/approach/" target="_self">Approach</a></li><li class="has-submenu"><a href="https://ralfw.de/trainings/" target="_self" aria-haspopup="true">Trainings</a><ul class="navbar__submenu level-2" aria-hidden="true"><li><a href="https://ralfw.de/test-first-codierung/" target="_self">Test-first CodierungğŸ‡©ğŸ‡ª</a></li><li><a href="https://ralfw.de/softwareentwurf-mit-flow-design/" target="_self">Softwareentwurf mit Flow-DesignğŸ‡©ğŸ‡ª</a></li><li><a href="https://ralfw.de/software-anforderungsanalyse-mit-slicing/" target="_self">Software Anforderungsanalyse mit SlicingğŸ‡©ğŸ‡ª</a></li></ul></li><li><a href="https://ralfw.de/consulting/" target="_self">Consulting</a></li><li><a href="https://ralfw.de/publications/" target="_self">Publications</a></li><li><a href="https://ralfw.de/testimonials/" target="_self">Testimonials</a></li><li class="has-submenu"><a href="https://ralfw.de/" target="_self" aria-haspopup="true">BlogsğŸ‡©ğŸ‡ªğŸ‡¬ğŸ‡§</a><ul class="navbar__submenu level-2" aria-hidden="true"><li><a href="https://ralfw.de/" target="_self">2015.. ğŸ‡©ğŸ‡ªğŸ‡¬ğŸ‡§</a></li><li><a href="https://blog.ralfw.de/" target="_blank">ğŸŒ2007..2015ğŸ‡©ğŸ‡ª</a></li><li><a href="http://geekswithblogs.net/theArchitectsNapkin/Default.aspx" target="_blank">ğŸŒ2008..2015ğŸ‡¬ğŸ‡§</a></li><li><a href="https://weblogs.asp.net/ralfw" target="_blank">ğŸŒ2003..2010ğŸ‡¬ğŸ‡§</a></li><li><span class="is-separator">â”€â”€â”€â”€â”€â”€â”€â”€â”€</span></li><li><a href="http://soziokratie.ralfw.de/" target="_blank">ğŸŒZur SoziokratieğŸ‡©ğŸ‡ª</a></li><li><a href="https://medium.com/gedankliche-umtriebe" target="_blank">ğŸŒGedankliche UmtriebeğŸ‡©ğŸ‡ª</a></li><li><a href="https://medium.com/personal-flow" target="_blank">ğŸŒPersonal FlowğŸ‡©ğŸ‡ª</a></li></ul></li><li><a href="https://ralfw.de/about/" target="_self">About</a></li></ul></nav><div class="search"><div class="search__overlay js-search-overlay"><div class="search__overlay-inner"><form action="https://ralfw.de/search.html" class="search__form"><input class="search__input js-search-input" type="search" name="q" placeholder="search..." aria-label="search..." autofocus="autofocus"></form><button class="search__close js-search-close" aria-label="Close">Close</button></div></div><button class="search__btn js-search-btn" aria-label="Search"><svg role="presentation" focusable="false"><use xlink:href="https://ralfw.de/assets/svg/svg-map.svg#search"/></svg></button></div></header><main><article class="post"><div class="hero"><figure class="hero__image hero__image--overlay"><img src="https://ralfw.de/media/posts/124/DraggedImage-1-1.png" srcset="https://ralfw.de/media/posts/124/responsive/DraggedImage-1-1-xs.png 300w, https://ralfw.de/media/posts/124/responsive/DraggedImage-1-1-sm.png 480w, https://ralfw.de/media/posts/124/responsive/DraggedImage-1-1-md.png 768w, https://ralfw.de/media/posts/124/responsive/DraggedImage-1-1-lg.png 1024w, https://ralfw.de/media/posts/124/responsive/DraggedImage-1-1-xl.png 1360w, https://ralfw.de/media/posts/124/responsive/DraggedImage-1-1-2xl.png 1600w" sizes="(max-width: 1600px) 100vw, 1600px" loading="eager" height="480" width="1056" alt=""></figure><header class="hero__content"><div class="wrapper"><div class="post__meta"><time datetime="2019-05-11T08:17">11.05.2019</time></div><h1>Terminus Architecture</h1><div class="post__meta post__meta--author"><a href="https://ralfw.de/authors/ralf-westphal/" class="feed__author invert">Ralf Westphal</a></div></div></header></div><div class="wrapper post__entry"><p></p><p>In my experience most software architectures in projects I see are too technical. They donâ€™t focus on the most important thing: results and behavior.</p><p></p><p></p><p>Robert C. Martin coined they term â€<a href="https://blog.cleancoder.com/uncle-bob/2011/09/30/Screaming-Architecture.html" target="_blank" rel="noopener">screaming architecture</a>â€œ:</p><p></p><p></p><blockquote class="wp-block-quote"><p>Your architectures should tell readers about the system, not about the frameworks you used in your system.</p></blockquote><p></p><p></p><p>I very much agree with that. But how exactly can this be accomplished?</p><p></p><p></p><p>A first step in the right direction to me is a <a href="https://ralfw.de/sleepy-hollow-architecture-no-application-should-be-without-it/">Sleepy Hollow Architecture</a>. It separates two fundamentally different parts of any software system: the head from the the body, the frontend from the backend.</p><p></p><p></p><p>A software might be about how to enter and/or visualize data. Or it might be about whatâ€™s behind such a facade (e.g. calculations or integration of resources). That likely results in frontend and backend being of considerable different size. Or it even might lead to using different programming platforms. This is already pretty obvious, even inevitable in necessarily distributed systems. But the point of the Sleepy Hollow Architecture is more fundamental. It suggests to make a share-nothing message-oriented separation of frontend and backend a principle. Start with it as a default like you start a building with the separation of foundation/basement and whatâ€™s built on top of that.</p><p></p><p></p><div class="wp-block-image"><figure class="aligncenter"><figure class="wp-image-2500"><img loading="lazy" src="https://ralfw.de/media/posts/124/DraggedImage-19.png" sizes="(max-width: 48em) 100vw, 768px" srcset="https://ralfw.de/media/posts/124/responsive/DraggedImage-19-xs.png 300w, https://ralfw.de/media/posts/124/responsive/DraggedImage-19-sm.png 480w, https://ralfw.de/media/posts/124/responsive/DraggedImage-19-md.png 768w, https://ralfw.de/media/posts/124/responsive/DraggedImage-19-lg.png 1024w, https://ralfw.de/media/posts/124/responsive/DraggedImage-19-xl.png 1360w, https://ralfw.de/media/posts/124/responsive/DraggedImage-19-2xl.png 1600w" alt="" width="642" height="165"></figure></figure></div><p></p><p></p><p>Without a clear separation the architecture will have a hard time to â€screamâ€œ what the software system is about, where its focus is. Strategic investments into pleasing the user with more usability or functionality will be harder to make without this fundamental structure.</p><p></p><p></p><p>But isnâ€™t that what the Layered Architecture or MVC is about? Yes, true, but they are trying to do more, they are more complicated, they are less fundamental in my view. I used to think along their lines but have come to the conclusion that software architecture should start out differently. The first evolutionary phase to me is the Sleepy Hollow Architecture. Thatâ€™s just the beginning, though!</p><p></p><p></p><h2>More structure for the body</h2><p></p><p></p><p>The purpose of software is to produce results. Or to phrase it a bit more technically: software transforms input into output â€“ which is perceived as behavior. You want to send it some data and receive some as a result. Thatâ€™s true for a desktop calculator, an online banking app, or a first-person shooter game. For this â€definitionâ€œ itâ€™s not important what kind of data you send or receive (with regard to size or structure of frequency) or how you send it (e.g. by keyboard, mouse, gesture, voice) or receive it (e.g. see, hear, feel it).</p><p></p><p></p><p>The Sleepy Hollow Architecture acknowledges that by making clear whoâ€™s truly creating behavior: the body. The body is the workhorse, the message handler. The frontend is â€justâ€œ a mediator between user and backend. The frontendâ€™s primary purpose is to allow the user to â€constructâ€œ input data structures and send them to the backend as a request. But it also presents the user the backendâ€™s response (which might be only part of the result created by the backend).</p><p></p><p></p><p>However, as much as the Sleepy Hollow Architectureâ€™s share-nothing message-oriented relationship between frontend and backend makes it clear that software is about data structure transformation, it falls short of differentiating how this is done. To the Sleepy Hollow Architecture the backend is a monolith, a lump, a black box. And thatâ€™s fine for a start.</p><p></p><p></p><p>In the end, though, as a programmer Iâ€™d like more guidance as to how to structure the backend now that I know how important it is. Is this the time to apply â€the rest of theâ€œ Layered Architecture? Or what about a Hexagonal or Clean Architecture?</p><p></p><p></p><p>Iâ€™ve come to the conclusion that those architectures donâ€™t really focus on what software is about. Where buildings are about rooms, i.e. providing bounded three-dimensional spaces, software is about processing messages.</p><p></p><p></p><p>If a schoolâ€™s or libraryâ€™s architecture is â€screamingâ€œ its purpose by bounding space in a particular way; you can look at a blueprint and pretty much at a glance see what the depicted building is about; the layout of the rooms is telling. Then why not also split a backend into its major building blocks?</p><p></p><p></p><p>The buildings blocks of buildings are rooms; the building blocks of backends are message handlers. Hence the â€naturalâ€œ basic structure of the backend is an array of message handlers.</p><p></p><p></p><div class="wp-block-image"><figure class="aligncenter"><figure class="wp-image-2508"><img loading="lazy" src="https://ralfw.de/media/posts/124/DraggedImage-1-1.png" sizes="(max-width: 48em) 100vw, 768px" srcset="https://ralfw.de/media/posts/124/responsive/DraggedImage-1-1-xs.png 300w, https://ralfw.de/media/posts/124/responsive/DraggedImage-1-1-sm.png 480w, https://ralfw.de/media/posts/124/responsive/DraggedImage-1-1-md.png 768w, https://ralfw.de/media/posts/124/responsive/DraggedImage-1-1-lg.png 1024w, https://ralfw.de/media/posts/124/responsive/DraggedImage-1-1-xl.png 1360w, https://ralfw.de/media/posts/124/responsive/DraggedImage-1-1-2xl.png 1600w" alt="" width="647" height="294"></figure></figure></div><p></p><p></p><p>The frontend is the one source of the input messages and the destination of the output messages. But behind this facade there are individual message handlers for each request. To me thatâ€™s looking like a terminus, a railway station where trains donâ€™t pass through, but stop and turn. (The term was inspired by the two train stations I passed through today in Paris: Gare de lâ€™Est and Gare Montparnasse.)</p><p></p><p></p><div class="wp-block-image"><figure class="aligncenter"><figure class="wp-image-2503"><img loading="lazy" src="https://ralfw.de/media/posts/124/DraggedImage-2-1.png" sizes="(max-width: 48em) 100vw, 768px" srcset="https://ralfw.de/media/posts/124/responsive/DraggedImage-2-1-xs.png 300w, https://ralfw.de/media/posts/124/responsive/DraggedImage-2-1-sm.png 480w, https://ralfw.de/media/posts/124/responsive/DraggedImage-2-1-md.png 768w, https://ralfw.de/media/posts/124/responsive/DraggedImage-2-1-lg.png 1024w, https://ralfw.de/media/posts/124/responsive/DraggedImage-2-1-xl.png 1360w, https://ralfw.de/media/posts/124/responsive/DraggedImage-2-1-2xl.png 1600w" alt="" width="660" height="441"></figure></figure></div><p></p><p></p><p>(terminus Frankfurt/Main, image Â© Thomas Wolf, <a href="https://www.foto-tw.de" target="_blank" rel="noopener noreferrer">www.foto-tw.de</a>, <a href="https://creativecommons.org/licenses/by-sa/3.0/de/legalcode" target="_blank" rel="noopener">CC BY-SA 3.0 DE</a>)</p><figure class="alignnone wp-image-2514"><img loading="lazy" src="https://ralfw.de/media/posts/124/paris-gare-de-lest-by-google-873x1024.png" sizes="(max-width: 48em) 100vw, 768px" srcset="https://ralfw.de/media/posts/124/responsive/paris-gare-de-lest-by-google-873x1024-xs.png 300w, https://ralfw.de/media/posts/124/responsive/paris-gare-de-lest-by-google-873x1024-sm.png 480w, https://ralfw.de/media/posts/124/responsive/paris-gare-de-lest-by-google-873x1024-md.png 768w, https://ralfw.de/media/posts/124/responsive/paris-gare-de-lest-by-google-873x1024-lg.png 1024w, https://ralfw.de/media/posts/124/responsive/paris-gare-de-lest-by-google-873x1024-xl.png 1360w, https://ralfw.de/media/posts/124/responsive/paris-gare-de-lest-by-google-873x1024-2xl.png 1600w" alt="" width="668" height="784"></figure><p>(Paris Gare de l'Est, imageÂ Â© <a href="https://www.google.com/maps/place/Paris+Ostbahnhof/@48.8783012,2.3594263,17z/data=!4m5!3m4!1s0x47e66e72ebc10f6f:0xae5593252035142c!8m2!3d48.876389!4d2.3584339" target="_blank" rel="noopener">Google</a>)</p><p></p><p></p><p>All the tracks run in/out in parallel. The stationâ€™s building is the one source/destination of the people who leave/arrive on different trains. The people are like the messages getting processed and produced. The trains running along the tracks are the handlers.</p><p></p><p></p><p>The Terminus Architecture can be depicted like above with the head being on one side of all the message handlers. Or it can be split into input editor and output projector sitting on opposite sides of the â€tracksâ€œ. That way the message processing flow is more in focus:</p><p></p><p></p><div class="wp-block-image"><figure class="aligncenter"><figure class="wp-image-2505"><img loading="lazy" src="https://ralfw.de/media/posts/124/DraggedImage-3-1.png" sizes="(max-width: 48em) 100vw, 768px" srcset="https://ralfw.de/media/posts/124/responsive/DraggedImage-3-1-xs.png 300w, https://ralfw.de/media/posts/124/responsive/DraggedImage-3-1-sm.png 480w, https://ralfw.de/media/posts/124/responsive/DraggedImage-3-1-md.png 768w, https://ralfw.de/media/posts/124/responsive/DraggedImage-3-1-lg.png 1024w, https://ralfw.de/media/posts/124/responsive/DraggedImage-3-1-xl.png 1360w, https://ralfw.de/media/posts/124/responsive/DraggedImage-3-1-2xl.png 1600w" alt="" width="649" height="253"></figure></figure></div><p></p><p></p><p>As shown, message handlers can access resources or even share resources. Whatever they like. The point of the Terminus Architecture is that the primary architectural building blocks are message handlers at all as opposed to horizontal concerns like â€business logicâ€œ.</p><p></p><p></p><p>On top of the Terminus Architecture you might want to further structure message handlers. No, you should further structure them! But thatâ€™s of no concern to the Terminus Architecture. Its message is just â€Think about message transformation first!â€œ</p><p></p><p></p><h2>Manifesting Agility in code</h2><p></p><p></p><p>Why slice the body of a software into message handlers instead of layers?</p><p></p><p></p><p>Firstly because software is about message handling. The Terminus Architecture thus creates basic congruency between purpose and form. To me thatâ€™s another essential step towards a screaming architecture.</p><p></p><p></p><p>Secondly because this furthers incremental development. Each message handler is an increment, sometimes a smaller one, sometimes a larger one. Adding another message handler increases the value of a software tangibly because itâ€™s a cross-cut from message reception to any resource access.</p><p></p><p></p><p>MVC, Layered Architecture, Hexagonal Architecture, Clean Architecture all are not incremental. I would call them horizontal architectures as opposed to the Terminus Architecture, which is vertical.</p><p></p><p></p><div class="wp-block-image"><figure class="aligncenter"><figure class="wp-image-2510"><img loading="lazy" src="https://ralfw.de/media/posts/124/DraggedImage-4-1.png" sizes="(max-width: 48em) 100vw, 768px" srcset="https://ralfw.de/media/posts/124/responsive/DraggedImage-4-1-xs.png 300w, https://ralfw.de/media/posts/124/responsive/DraggedImage-4-1-sm.png 480w, https://ralfw.de/media/posts/124/responsive/DraggedImage-4-1-md.png 768w, https://ralfw.de/media/posts/124/responsive/DraggedImage-4-1-lg.png 1024w, https://ralfw.de/media/posts/124/responsive/DraggedImage-4-1-xl.png 1360w, https://ralfw.de/media/posts/124/responsive/DraggedImage-4-1-2xl.png 1600w" alt="" width="626" height="513"></figure></figure></div><p></p><p></p><p>The Terminus approach is orthogonal to the traditional software architectural patterns. And for a very good reason: Agility!</p><p></p><p></p><p>If Agility is about progressing incrementally through requirements then to me it seems consistent to structure code accordingly. Doing Scrum on a Layered Architecture hence is a contradiction in my view. No small wonder that even projects run in an agile manner often cannot reap all the benefits. Among many detrimental factors they can be hindered by an architecture not matching a basic tenet: incrementally increasing value.</p><p></p><p></p><p>Todayâ€™s trend towards serverless software systems is supporting the Terminus Architecture well with platforms like AWS Lambda or Azure Functions. My intention is, however, to bring this kind of thinking to (almost) all application. No application is too small to not benefit from a Terminus Architecture; because todayâ€™s small applications are tomorrowâ€™s large(r) applications.</p><p></p><p></p><p>With a Terminus Architecture itâ€™s easy to add another and another message to be handled. Itâ€™s also easy to clearly separate work on different features located in different message handlers.</p><p></p><p></p><h2>An example application</h2><p></p><p></p><p>To show you how a Terminus Architecture might look in code I refactored the sample application from the Sleepy Hollow Architecture article. The backend of the stock portfolio manager got split up into several message handlers.</p><p></p><p></p><p>This manifests itself first in the contract between frontend and backend:</p><p></p><p></p><div class="wp-block-image"><figure class="aligncenter"><figure class="wp-image-2504"><img loading="lazy" src="https://ralfw.de/media/posts/124/DraggedImage-5-1.png" sizes="(max-width: 48em) 100vw, 768px" srcset="https://ralfw.de/media/posts/124/responsive/DraggedImage-5-1-xs.png 300w, https://ralfw.de/media/posts/124/responsive/DraggedImage-5-1-sm.png 480w, https://ralfw.de/media/posts/124/responsive/DraggedImage-5-1-md.png 768w, https://ralfw.de/media/posts/124/responsive/DraggedImage-5-1-lg.png 1024w, https://ralfw.de/media/posts/124/responsive/DraggedImage-5-1-xl.png 1360w, https://ralfw.de/media/posts/124/responsive/DraggedImage-5-1-2xl.png 1600w" alt="" width="415" height="709"></figure></figure></div><p></p><p></p><p>There is no single interface for all message handling anymore. Messages and their message handler abstractions are now co-located. All that belongs together is not sitting in one place next to each other in a folder.</p><p></p><p></p><p>There are a couple of generic basic message handler interfaces:</p><p></p><p></p><div class="wp-block-image"><figure class="aligncenter"><figure class="wp-image-2509"><img loading="lazy" src="https://ralfw.de/media/posts/124/DraggedImage-6-1.png" sizes="(max-width: 48em) 100vw, 768px" srcset="https://ralfw.de/media/posts/124/responsive/DraggedImage-6-1-xs.png 300w, https://ralfw.de/media/posts/124/responsive/DraggedImage-6-1-sm.png 480w, https://ralfw.de/media/posts/124/responsive/DraggedImage-6-1-md.png 768w, https://ralfw.de/media/posts/124/responsive/DraggedImage-6-1-lg.png 1024w, https://ralfw.de/media/posts/124/responsive/DraggedImage-6-1-xl.png 1360w, https://ralfw.de/media/posts/124/responsive/DraggedImage-6-1-2xl.png 1600w" alt="" width="736" height="412"></figure></figure></div><p></p><p></p><p>But most importantly each message handler now has its own interface; hereâ€™s an example:</p><p></p><p></p><div class="wp-block-image"><figure class="aligncenter"><figure class="wp-image-2501"><img loading="lazy" src="https://ralfw.de/media/posts/124/DraggedImage-7-1.png" sizes="(max-width: 48em) 100vw, 768px" srcset="https://ralfw.de/media/posts/124/responsive/DraggedImage-7-1-xs.png 300w, https://ralfw.de/media/posts/124/responsive/DraggedImage-7-1-sm.png 480w, https://ralfw.de/media/posts/124/responsive/DraggedImage-7-1-md.png 768w, https://ralfw.de/media/posts/124/responsive/DraggedImage-7-1-lg.png 1024w, https://ralfw.de/media/posts/124/responsive/DraggedImage-7-1-xl.png 1360w, https://ralfw.de/media/posts/124/responsive/DraggedImage-7-1-2xl.png 1600w" alt="" width="738" height="27"></figure></figure></div><p></p><p></p><p>Already at this point I find the Terminus Architecture very focussing. I donâ€™t get overwhelmed by so many things a backend needs to do. And I donâ€™t need to ponder the question of whether all the backend services should be represented by one interface or multiple. There simply is no doubt: every single service, i.e. an offer to handle a certain message, gets its own interface. Always.</p><p></p><p></p><p>But it does not stop there! Look at the backend implementation:</p><p></p><p></p><div class="wp-block-image"><figure class="aligncenter"><figure class="wp-image-2506"><img loading="lazy" src="https://ralfw.de/media/posts/124/DraggedImage-8-1.png" sizes="(max-width: 48em) 100vw, 768px" srcset="https://ralfw.de/media/posts/124/responsive/DraggedImage-8-1-xs.png 300w, https://ralfw.de/media/posts/124/responsive/DraggedImage-8-1-sm.png 480w, https://ralfw.de/media/posts/124/responsive/DraggedImage-8-1-md.png 768w, https://ralfw.de/media/posts/124/responsive/DraggedImage-8-1-lg.png 1024w, https://ralfw.de/media/posts/124/responsive/DraggedImage-8-1-xl.png 1360w, https://ralfw.de/media/posts/124/responsive/DraggedImage-8-1-2xl.png 1600w" alt="" width="401" height="273"></figure></figure></div><p></p><p></p><p>All messages are represented by their message handler implementations. There is a 1:1 mapping between user interactions with the frontend (user interface), messages, and message handlers.</p><p></p><p></p><p>All requirements can be traced back to one or more interactions. And now they can be further traced to their handlers. The design time file structure as well as the runtime object structure mirror the basic requirements.</p><p></p><p></p><p>I call that a behavior-oriented (or results-oriented) approach as opposed to the technical approach of the Layered Architecture etc. (or worse a â€Spring Boot Architectureâ€œ).</p><p></p><p></p><p>But wait, there is more!</p><p></p><p></p><p>Just take a quick look at one of the message handlers:</p><p></p><p></p><div class="wp-block-image"><figure class="aligncenter"><figure class="wp-image-2502"><img loading="lazy" src="https://ralfw.de/media/posts/124/DraggedImage-9-1.png" sizes="(max-width: 48em) 100vw, 768px" srcset="https://ralfw.de/media/posts/124/responsive/DraggedImage-9-1-xs.png 300w, https://ralfw.de/media/posts/124/responsive/DraggedImage-9-1-sm.png 480w, https://ralfw.de/media/posts/124/responsive/DraggedImage-9-1-md.png 768w, https://ralfw.de/media/posts/124/responsive/DraggedImage-9-1-lg.png 1024w, https://ralfw.de/media/posts/124/responsive/DraggedImage-9-1-xl.png 1360w, https://ralfw.de/media/posts/124/responsive/DraggedImage-9-1-2xl.png 1600w" alt="" width="656" height="322"></figure></figure></div><p></p><p></p><p>How small is that, right? Yes, very, very focused. Iâ€™d say thatâ€™s right along the SRP. And itâ€™s the ISP at its best. And DIP on top of that. And also OCP because for the next message to handle you donâ€™t need to change a message handler but just stuff (extend the codebase). That should appeal to you if youâ€™re a friend of the SOLID principles.</p><p></p><p></p><p>In case you should feel reminded of Functional Programming let me say: Why not? Mainstream object-orientation has done enough harm to codebases over the past 25 years. Itâ€™s time for a pivot.</p><p></p><p></p><p>Although Iâ€™m a friend of Functional Programming I donâ€™t see a stark need to switch from C# to F# or from Java to Clojure tomorrow, though. For now itâ€™s enough to maybe use some OO features in a bit different manner.</p><p></p><p></p><p>And finally hereâ€™s how to integrate frontend and backend in a Terminus Architecture:</p><p></p><p></p><div class="wp-block-image"><figure class="aligncenter"><figure class="wp-image-2507"><img loading="lazy" src="https://ralfw.de/media/posts/124/DraggedImage-10-1.png" sizes="(max-width: 48em) 100vw, 768px" srcset="https://ralfw.de/media/posts/124/responsive/DraggedImage-10-1-xs.png 300w, https://ralfw.de/media/posts/124/responsive/DraggedImage-10-1-sm.png 480w, https://ralfw.de/media/posts/124/responsive/DraggedImage-10-1-md.png 768w, https://ralfw.de/media/posts/124/responsive/DraggedImage-10-1-lg.png 1024w, https://ralfw.de/media/posts/124/responsive/DraggedImage-10-1-xl.png 1360w, https://ralfw.de/media/posts/124/responsive/DraggedImage-10-1-2xl.png 1600w" alt="" width="652" height="747"></figure></figure></div><p></p><p></p><p>Of course now there are a number of message handlers not just one which need to get instantiated. They then could all get injected into the frontend in a monolithic application. But I chose a different approach.</p><p></p><p></p><p>This time I donâ€™t inject the message handlers but attach them as event handlers to the frontend. That way the frontend is even more focused on frontend stuff, I think. Itâ€™s functionally independent of the message handlers.</p><p></p><p></p><h2>Summary</h2><p></p><p></p><p>Iâ€™ve come to like the Sleepy Hollow + Terminus Architecture combination. It takes off a lot of mental load when approaching a new problem. I feel so much more focused. And the result is more congruent with the view of the customer who does not care about technical details but getting requests processed by the software.</p><p></p><p></p><p>It might seem the Terminus Architecture is adding some textual overhead: more interfaces, more classes, more integration code. Yes, maybe. But I find it worth it. More text, but less mental burden.</p><p></p><p></p><p>And any shared data between message handlers now is more explicit. That helps me to see dependencies more clearly and reason about the code.</p><p></p><p></p><p>A Terminus Architecture to me is a first step towards a screaming architecture because on a high level of abstraction it structurally represents whatâ€™s most important in a software: the processes (or workflows or maybe use cases; whatever you want to call message handling). And not only in some large enterprise system but in a manageable way for every application. A good foundation for evolutionary growth.</p><p></p><p></p><p>Try it for yourself!</p><figure class="alignnone wp-image-2520"><img loading="lazy" src="https://ralfw.de/media/posts/124/githublogo-150x150.png" sizes="(max-width: 48em) 100vw, 768px" srcset="https://ralfw.de/media/posts/124/responsive/githublogo-150x150-xs.png 300w, https://ralfw.de/media/posts/124/responsive/githublogo-150x150-sm.png 480w, https://ralfw.de/media/posts/124/responsive/githublogo-150x150-md.png 768w, https://ralfw.de/media/posts/124/responsive/githublogo-150x150-lg.png 1024w, https://ralfw.de/media/posts/124/responsive/githublogo-150x150-xl.png 1360w, https://ralfw.de/media/posts/124/responsive/githublogo-150x150-2xl.png 1600w" alt="" width="30" height="30"></figure>Â <a href="https://github.com/ralfw/architecture-variations/tree/master/02%20terminus%20architecture" target="_blank" rel="noopener">[GitHub repo with sample code]</a><p></p><figure class="alignnone wp-image-2521"><img loading="lazy" src="https://ralfw.de/media/posts/124/redditlogo-150x150.png" sizes="(max-width: 48em) 100vw, 768px" srcset="https://ralfw.de/media/posts/124/responsive/redditlogo-150x150-xs.png 300w, https://ralfw.de/media/posts/124/responsive/redditlogo-150x150-sm.png 480w, https://ralfw.de/media/posts/124/responsive/redditlogo-150x150-md.png 768w, https://ralfw.de/media/posts/124/responsive/redditlogo-150x150-lg.png 1024w, https://ralfw.de/media/posts/124/responsive/redditlogo-150x150-xl.png 1360w, https://ralfw.de/media/posts/124/responsive/redditlogo-150x150-2xl.png 1600w" alt="" width="30" height="30"></figure>Â <a href="https://www.reddit.com/r/softwarearchitecture/comments/bn98qz/lets_put_message_processing_at_the_heart_of/" target="_blank" rel="noopener">[If you like let's discuss this on reddit...]</a><p></p><p></p></div><footer class="wrapper post__footer"><p class="post__last-updated">This article was updated on 28.01.2021</p><ul class="post__tag"><li><a href="https://ralfw.de/tags/software-architecture/">Software architecture</a></li></ul><div class="post__share"></div></footer></article><nav class="post__nav"><div class="post__nav-inner"><div class="post__nav-prev"><svg width="1.041em" height="0.416em" aria-hidden="true"><use xlink:href="https://ralfw.de/assets/svg/svg-map.svg#arrow-prev"/></svg> <a href="https://ralfw.de/sleepy-hollow-architecture-no-application-should-be-without-it/" class="invert post__nav-link" rel="prev"><span>Previous</span> Sleepy Hollow Architecture - No application should be without it</a></div><div class="post__nav-next"><a href="https://ralfw.de/food-truck-architecture-its-all-about-events/" class="invert post__nav-link" rel="next"><span>Next</span> Food Truck Architecture - Itâ€™s all about events </a><svg width="1.041em" height="0.416em" aria-hidden="true"><use xlink:href="https://ralfw.de/assets/svg/svg-map.svg#arrow-next"/></svg></div></div></nav></main><footer class="footer"><div class="footer__copyright"><p>One Man Think Tank EOOD - Sofia, Bulgaria - <a href="../../../../../../imprint">Imprint</a> - <a href="../../../../../../data-privacy-policy">Data Privacy Policy</a></p></div><button class="footer__bttop js-footer__bttop" aria-label="Back to top"><svg><title>Back to top</title><use xlink:href="https://ralfw.de/assets/svg/svg-map.svg#toparrow"/></svg></button></footer></div><script>window.publiiThemeMenuConfig = {    
        mobileMenuMode: 'sidebar',
        animationSpeed: 300,
        submenuWidth: 'auto',
        doubleClickTime: 500,
        mobileMenuExpandableSubmenus: true, 
        relatedContainerForOverlayMenuSelector: '.top',
   };</script><script defer="defer" src="https://ralfw.de/assets/js/scripts.min.js?v=f4c4d35432d0e17d212f2fae4e0f8247"></script><script>var images = document.querySelectorAll('img[loading]');

        for (var i = 0; i < images.length; i++) {
            if (images[i].complete) {
                images[i].classList.add('is-loaded');
            } else {
                images[i].addEventListener('load', function () {
                    this.classList.add('is-loaded');
                }, false);
            }
        }</script></body></html>