<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Hamburg Style TDD - One Man Think Tank</title><meta name="description" content=" There are a number of „TDD styles“ (or even „schools of TDD“): And I cannot identify myself with any of them. Not 100% at least. Recently I attended a talk by Marco Emrich who showed the above styles next to each other - and&hellip;"><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="canonical" href="https://ralfw.github.io/homepage-ralfw-de/hamburg-style-tdd/"><link rel="alternate" type="application/atom+xml" href="https://ralfw.github.io/homepage-ralfw-de/feed.xml"><link rel="alternate" type="application/json" href="https://ralfw.github.io/homepage-ralfw-de/feed.json"><meta property="og:title" content="Hamburg Style TDD"><meta property="og:image" content="https://ralfw.github.io/homepage-ralfw-de/media/website/logo.png"><meta property="og:site_name" content="One Man Think Tank"><meta property="og:description" content=" There are a number of „TDD styles“ (or even „schools of TDD“): And I cannot identify myself with any of them. Not 100% at least. Recently I attended a talk by Marco Emrich who showed the above styles next to each other - and&hellip;"><meta property="og:url" content="https://ralfw.github.io/homepage-ralfw-de/hamburg-style-tdd/"><meta property="og:type" content="article"><link rel="shortcut icon" href="https://ralfw.github.io/homepage-ralfw-de/media/website/favicon.png" type="image/x-icon"><style>:root{--body-font:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";--heading-font:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";--logo-font:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";--menu-font:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol"}</style><link rel="stylesheet" href="https://ralfw.github.io/homepage-ralfw-de/assets/css/style.css?v=a9215503b210be030bd9981142f6814f"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://ralfw.github.io/homepage-ralfw-de/hamburg-style-tdd/"},"headline":"Hamburg Style TDD","datePublished":"2019-07-22T11:35","dateModified":"2021-01-25T16:26","image":{"@type":"ImageObject","url":"https://ralfw.github.io/homepage-ralfw-de/media/website/logo.png","height":860,"width":4068},"description":" There are a number of „TDD styles“ (or even „schools of TDD“): And I cannot identify myself with any of them. Not 100% at least. Recently I attended a talk by Marco Emrich who showed the above styles next to each other - and&hellip;","author":{"@type":"Person","name":"Ralf Westphal"},"publisher":{"@type":"Organization","name":"Ralf Westphal","logo":{"@type":"ImageObject","url":"https://ralfw.github.io/homepage-ralfw-de/media/website/logo.png","height":860,"width":4068}}}</script></head><body><div class="site-container"><header class="top" id="js-header"><a class="logo" href="https://ralfw.github.io/homepage-ralfw-de/"><img src="https://ralfw.github.io/homepage-ralfw-de/media/website/logo.png" alt="One Man Think Tank"></a><nav class="navbar js-navbar"><button class="navbar__toggle js-toggle" aria-label="Menu" aria-haspopup="true" aria-expanded="false"><span class="navbar__toggle-box"><span class="navbar__toggle-inner">Menu</span></span></button><ul class="navbar__menu"><li><a href="https://ralfw.github.io/homepage-ralfw-de/tags/page/" target="_self">Pages</a></li><li><a href="https://ralfw.github.io/homepage-ralfw-de/focus/" target="_self">Focus</a></li><li><a href="https://ralfw.github.io/homepage-ralfw-de/approach/" target="_self">Approach</a></li></ul></nav></header><main><article class="post"><div class="hero"><header class="hero__content"><div class="wrapper"><div class="post__meta"><time datetime="2019-07-22T11:35">22.07.2019</time></div><h1>Hamburg Style TDD</h1><div class="post__meta post__meta--author"><a href="https://ralfw.github.io/homepage-ralfw-de/authors/ralf-westphal/" class="feed__author invert">Ralf Westphal</a></div></div></header></div><div class="wrapper post__entry"><p></p><p>There are a number of „TDD styles“ (or even „schools of TDD“):</p><p></p><p></p><ul><li><a href="https://8thlight.com/blog/georgina-mcfadyen/2016/06/27/inside-out-tdd-vs-outside-in.html" target="_blank" rel="noopener">Chicago style</a></li><li><a href="https://8thlight.com/blog/georgina-mcfadyen/2016/06/27/inside-out-tdd-vs-outside-in.html" target="_blank" rel="noopener">London style</a></li><li><a href="https://de.slideshare.net/davidvoelkel/fake-it-outsidein-tdd-xp2017" target="_blank" rel="noopener">Munich style</a></li></ul><p></p><p></p><p>And I cannot identify myself with any of them. Not 100% at least.</p><p></p><p></p><p>Recently I attended a talk by <a href="https://twitter.com/marcoemrich" target="_blank" rel="noopener">Marco Emrich</a> who showed the above styles next to each other - and I kept shaking my head. There was some usefulness to all of them, but none really convinced me.</p><p></p><p></p><p>Then I saw a tweet by <a href="https://twitter.com/davidvoelkel" target="_blank" rel="noopener">David Völkel</a> in which he mentioned doing the Diamond kata „Munich style“. That triggered me to do it, too - and also Marco’s example from his talk, the Bank kata.</p><p></p><p></p><h2>Styleguide</h2><p></p><p></p><p>But what am I doing differently? Am I doing some kind of TDD at all? What’s TDD in the first place?</p><p></p><p></p><h3>My understanding of TDD</h3><p></p><p></p><p>TDD is mainly characterized by a simple process with three steps:</p><p></p><p></p><ol><li>Red</li><li>Green</li><li>Refactor</li></ol><p></p><p></p><p>That means it’s a test-first approach to programming: first write a not passing test (red), then write production code to make the test pass (green).</p><p></p><p></p><p>What takes it beyond test-first, though, is the refactoring step. By that TDD acknowledges that production code should not only pass tests, i.e. show some runtime behavior, but also be of a certain form (which is not relevant to its behavior).</p><p></p><p></p><p>Also TDD clearly states its process should be run through multiple times. TDD explicitly is an iterative approach to programming.</p><p></p><p></p><p>And then TDD urges you to let test cases increase in their difficulty from iteration to iteration. With each iteration a bit more value is added to the production code. TDD thus also an explicitly incremental approach to programming.</p><p></p><p></p><p>There is little said, however, about how each step should be performed. But getting a test to green should only involve the simplest possible addition to the production code (application of KISS principle). And refactoring should eliminate duplication.</p><p></p><p></p><p>Since Kent Beck is the „inventor“ of TDD it’s no small wonder that also his „<a href="https://martinfowler.com/bliki/BeckDesignRules.html" target="_blank" rel="noopener">for elements of simple design</a>“ are of relevance:</p><p></p><p></p><ul><li>Passes the tests</li><li>Reveals intention</li><li>No duplication</li><li>Fewest elements</li></ul><p></p><p></p><p>That’s pretty much it, I guess. That’s TDD. Easily stated - but difficult to implement. The problems start, I think, when applying all this blindly. Rules seem to ask for obedience. And so developers are trying to obey - with very mixed results and quite some frustration.</p><p></p><p></p><p>No small wonder, different „schools of TDD“ emerged.</p><p></p><p></p><p>The matter is and the problems are too complex for a single set of rules and a single approach. On top of that there is probably an unknown amount of loss in communicating TDD: Kent Beck surely is the master of TDD - but does he (or even can he) convey everything he does/think/know in a book or several blog posts? I don’t think so.</p><p></p><p></p><p>When communicating one’s own „being“ much cannot be said explicitly. Much is falling through the cracks when preparing a descriptive document. Being can only fully be experienced by watching someone in a not prepared situation.</p><p></p><p></p><p>What happens when a lossy communication is taken for something lossless? Confusion ensues. Applying the lossy content will not lead to the same results as for the originator. This leads to frustration, conflicts, lots of discussion, or worse.</p><p></p><p></p><p>This has happened for Agility in general and also for TDD as part of Agility, I think.</p><p></p><p></p><h3>Only experience counts</h3><p></p><p></p><p>From the inevitability of lossy communication (and before that reflection about one’s actions) follows that adherence to rules cannot be the goal.</p><p></p><p></p><p><strong>Rules are nothing! The only thing that counts is success. If you consistently experience success without following certain rules, whatever you do is superior to the rules.</strong></p><p></p><p></p><p>Rules thus are only suggestions for how to achieve results. Nothing more, nothing less. They are invitations - and can be declined.</p><p></p><p></p><p>Follow rules at your own peril.</p><p></p><p></p><p>Don’t follow rules at your own peril.</p><p></p><p></p><p>To improve your results, your task is not to follow rules, but to evaluate your actions - and then adjust your approach if you find the results lacking some quality. You cannot offload responsibility for results to certain rules. The responsibility always is with you.</p><p></p><p></p><p>Kent Beck, Robert C. Martin, J.B. Rainsberger, David Völkel, or Ralf Westphal are only reporting (personal) experiences and their humble reflections on why they think there might be causal connections between doing something and getting certain results.</p><p></p><p></p><p>If you feel inspired by that and try to reproduce their results, stay alert. Lots of things can go wrong. And not all that was going on when they made their experiences has been/could be reported.</p><p></p><p></p><p>Trying harder to follow whatever account you read to overcome some information loss thus is natural. Also it’s natural to adapt whatever you’ve heard to your situation. You’re entitled to your own experiences and reflections. Maybe they just deviate from what you’ve read, maybe they are in outright opposition.</p><p></p><p></p><p>Any result, any approach is ok. Just remember: reflect on it.</p><p></p><p></p><h3>My reflections</h3><p></p><p></p><p>That’s what I’ve done: I reflected on why I wasn’t satisfied with the results I got from applying TDD.</p><p></p><p></p><p>To make a long story short, what I found was: TDD was playing dumb.</p><p></p><p></p><p>TDD is a problem solving tool. The problem being: conversion of requirements into code. And to be more precise: into logic plus structure. Logic to create the desired behavior at runtime, structure to keep programmer productivity high over an indefinite period of time. TDD is about functional and clean code.</p><p></p><p></p><p>That’s great! I’m all for this result.</p><p></p><p></p><p>But I beg to differ with regard to the approach.</p><p></p><p></p><p>Where I agree:</p><p></p><p></p><ul><li>I agree with the basic test-first approach of TDD.</li><li>I agree with the importance of refactoring.</li><li>I agree with revealing intentions.</li><li>I agree with avoiding duplication.</li><li>I agree with avoiding overengineering.</li><li>I agree with the importance of passing all tests.</li></ul><p></p><p></p><p>But there are a couple of points I don’t agree with:</p><p></p><p></p><ul><li>Refactoring is great. But even better is to not need to refactor. If I can come up with (pretty) clean code right from the start, why should I refactor.</li><li>What to refactor to? TDD is barely making any statement about that, which is one of the reasons why many supposedly TDD based solutions I’ve seen are… not clean.</li><li>Overengineering sure is an evil to avoid. But something that might look like overengineering to the code author today might be a helpful structure to a code reader tomorrow. Where to draw the line? My feeling is, TDD users are carried away too often by the mentions of KISS and „fewest elements“. „Elegance“ is still in high esteem, even though it’s a twin of obscurity.</li></ul><p></p><p></p><p>And finally: What’s bugging me again and again when looking at TDD examples is the neglect of easily achievable insight. TDD proponents are dumbing themselves (and thus the process) down in a drive to… hm… to what? Maybe to avoid overengineering? Or to go faster while writing code?</p><p></p><p></p><p>Yes, I guess it’s the will to be faster and to avoid BDUF. BDUF is costing time now and time later when it needs to get adapted to new information. BDUF is bad. We know that, right?</p><p></p><p></p><p>Sure, BDUF is bad. By definition. It’s evil because of the B. <em>Big</em> design is deferring feedback.</p><p></p><p></p><p>DUF, though, is not bad in my experience. Designing a solution before coding is even inevitable. At least I need to think before coding. I need to make a plan before I create structures and arrange logic. Sometimes the thinking takes 10 seconds, sometimes 10 minutes or 30 minutes.</p><p></p><p></p><p>TBC (Thinking Before Coding) to me is essential. It’s a discipline of its own. It needs to be trained, it needs to be taught.</p><p></p><p></p><p>But TBC has vanished from curricula and is not visible in popular TDD examples.</p><p></p><p></p><p>I’m not saying TDD proponents are not thinking before coding. What I’m trying to get across is that such thinking is not made explicit. It has no form. It’s not expressed in code or in any other way.</p><p></p><p></p><p>The incremental tests of TDD are no expression of such TBC in my view. Because test cases are only about understanding requirements, not designing a solution. Tests are no models.</p><p></p><p></p><p>Models, however, are badly needed, if coding is supposed to progress smoothly.</p><p></p><p></p><h2>The perennial cycle of software development</h2><p></p><p></p><p>I want to add another iterative process to TDD’s red-green-refactor (RGR). It’s simple, it’s natural, it’s even inevitable:</p><p></p><p></p><ul><li>Analyze</li><li>Design</li><li>Code</li></ul><p></p><p></p><p>The ADC iterations are sometimes congruent with the RGR iterations, but sometimes not. RGR can happen inside of C.</p><p></p><p></p><p>In any case I find it important to emphasize these three step process because I think it’s what software development is about, and not only software development if you replace „Code“ with some other implementation discipline like „Paint“ or „Cook“.</p><p></p><p></p><p>ADC is to be cycled through many times on different levels of detail. It’s to be used iteratively and even incrementally if possible.</p><p></p><p></p><p>And, yes, the D sits right before the C. So it’s design „upfront“, it’s thinking before coding. Like it’s listening and asking before designing.</p><p></p><p></p><p>In my „school of TDD“ „students“ are asked to first analyze requirements. That means they need to build a solid understanding of the problem. And they need to express this understanding in an unambiguous form open to scrutiny.</p><p></p><p></p><p>Only once understanding is clear they move on to create a model for a solution to the problem. A model is the result of the design step. But of course a model is not „the real thing“, it’s not the solution yet. A model is a more or less abstract description of an approach to solve a problem. It’s declarative, whereas the solution, the logic is imperative.</p><p></p><p></p><p>And finally they implement their model using the means of a programming language. Implementation is guided by the model and thus produces less waste. To me implementation mostly is boring and a comparatively mechanical task. Designing the model on the other hand is exciting and highly creative.</p><p></p><p></p><p>My feeling is, design (and also analysis) are underrated steps in software development. And coding is an overrated step.</p><p></p><p></p><p>Making the ADC loop explicit is thus what I find important. It’s more important than doing TDD the Chicago style or London style. Hence I’d call my approach to TDD eclectic. It’s drawing from all styles if that’s what’s needed to further the cause of creating correct code plus clean code.</p><p></p><p></p><p>However, there’s one main distinction which leads to a different stance regarding mocks and other substitutes: I believe that functional dependencies are to be avoided as much as possible. They make code hard to read and hard to test. What my design and then coding are striving for is adherence to the <a href="https://blog.ralfw.de/2013/01/beispielhafte-nichtbeachtung.html" target="_blank" rel="noopener">IOSP (Integration Operation Segregation Principle)</a> which I derived a couple of years ago from Alan Kay’s definition of object-orientation.</p><p></p><p></p><p>But enough with all the theory. What does „Hamburg style TDD“ look like when applied? Check out the following articles for demonstrations:</p><p></p><p></p><ul><li><a href="https://ralfw.de/2019/07/hamburg-style-tdd-diamond-kata/">Diamond kata</a></li><li><a href="https://ralfw.de/2019/07/hamburg-style-tdd-bank-kata/" target="_blank" rel="noopener">Bank kata</a></li></ul><p></p></div><footer class="wrapper post__footer"><p class="post__last-updated">This article was updated on 25.01.2021</p><ul class="post__tag"><li><a href="https://ralfw.github.io/homepage-ralfw-de/tags/tdd/">TDD</a></li></ul><div class="post__share"></div></footer></article><nav class="post__nav"><div class="post__nav-inner"><div class="post__nav-prev"><svg width="1.041em" height="0.416em" aria-hidden="true"><use xlink:href="https://ralfw.github.io/homepage-ralfw-de/assets/svg/svg-map.svg#arrow-prev"/></svg> <a href="https://ralfw.github.io/homepage-ralfw-de/command-query-notification-separation-cqns/" class="invert post__nav-link" rel="prev"><span>Previous</span> Command Query Notification Separation (CQNS)</a></div><div class="post__nav-next"><a href="https://ralfw.github.io/homepage-ralfw-de/hamburg-style-tdd-diamond-kata/" class="invert post__nav-link" rel="next"><span>Next</span> Hamburg Style TDD - Diamond Kata </a><svg width="1.041em" height="0.416em" aria-hidden="true"><use xlink:href="https://ralfw.github.io/homepage-ralfw-de/assets/svg/svg-map.svg#arrow-next"/></svg></div></div></nav></main><footer class="footer"><div class="footer__copyright"><p>One Man Think Tank EOOD - Sofia, Bulgaria - Imprint - Data Privacy Policy</p></div><button class="footer__bttop js-footer__bttop" aria-label="Back to top"><svg><title>Back to top</title><use xlink:href="https://ralfw.github.io/homepage-ralfw-de/assets/svg/svg-map.svg#toparrow"/></svg></button></footer></div><script>window.publiiThemeMenuConfig = {    
        mobileMenuMode: 'sidebar',
        animationSpeed: 300,
        submenuWidth: 'auto',
        doubleClickTime: 500,
        mobileMenuExpandableSubmenus: true, 
        relatedContainerForOverlayMenuSelector: '.top',
   };</script><script defer="defer" src="https://ralfw.github.io/homepage-ralfw-de/assets/js/scripts.min.js?v=f4c4d35432d0e17d212f2fae4e0f8247"></script><script>var images = document.querySelectorAll('img[loading]');

        for (var i = 0; i < images.length; i++) {
            if (images[i].complete) {
                images[i].classList.add('is-loaded');
            } else {
                images[i].addEventListener('load', function () {
                    this.classList.add('is-loaded');
                }, false);
            }
        }</script></body></html>